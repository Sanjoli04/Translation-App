<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Translator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

  <div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-xl">
    <h1 class="text-2xl font-bold text-center mb-6">üåç Translate Something</h1>

    <form id="translate-form" class="space-y-4">
      <textarea id="text-input" class="w-full p-3 border rounded-lg" rows="4" placeholder="Enter your text..."></textarea>

      <select id="language-select" class="w-full p-3 border rounded-lg">
        <option value="">Loading languages...</option>
      </select>

      <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold">
        Translate
      </button>
    </form>

    <div id="output" class="mt-6 text-lg font-medium text-gray-800"></div>
  </div>

  <!-- Load ISO 639-1 JS from Skypack -->
  <script type="module">
    import ISO6391 from 'https://cdn.skypack.dev/iso-639-1';

    const select = document.getElementById('language-select');
    const outputDiv = document.getElementById('output');

    // Populate dropdown
    const codes = ISO6391.getLanguages();
    select.innerHTML = '<option value="">Select a language</option>';
    codes.forEach(code => {
      const name = ISO6391.getName(code);
      const option = document.createElement('option');
      option.value = code;
      option.textContent = name;
      select.appendChild(option);
    });

    // Form submit handler
    document.getElementById('translate-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const text = document.getElementById('text-input').value.trim();
      const target_lang = select.value;

      if (!text || !target_lang) {
        outputDiv.textContent = "Please enter text and select a language.";
        return;
      }

      try {
        const res = await fetch('https://your-backend-url.com/translate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text, target_lang })
        });

        const data = await res.json();
        outputDiv.textContent = data.translated_text || "Translation failed.";
      } catch (err) {
        outputDiv.textContent = "Server error. Try again.";
        console.error(err);
      }
    });
  </script>

</body>
</html>
